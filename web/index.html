<html ng-app="easyrider">
	<head>
		<link rel="stylesheet" href="main.css" />
	</head>
	<body ng-controller="AppsCtrl">
		Hello, world! {{connectionStatus}}
		<form class="form-inline" role="form" ng-show="role == null">
			<div class="form-group">
				<label for="username">Username</label>
				<input id="username" class="form-control" type="text" ng-model="username" />
			</div>
			<div class="form-group">
				<label for="password">Password</label>
				<input id="password" class="form-control" type="password" ng-model="password" />
			</div>
			<button class="btn btn-default" ng-click="login()">Login</button>
		</form>
		<div ng-hide="role == null">
			<h2>Apps</h2>
			<div ng-repeat="app in apps">
				<h3>App {{app.name}}</h3>
				<div ng-repeat="stage in app.stages">
					<h4>{{stage.name}}</h4>
					<div class="row">
						<div class="col-md-2 panel panel-default" ng-repeat="instance in stage.instances">
							{{instance.id}} at {{instance.node}}
						</div>
					</div>
				</div>
			</div>
			<h2>Repo</h2>
			<div ng-repeat="(app, appVersions) in versions">
				<h3>{{app}}</h3>
				<div ng-repeat="version in appVersions">
					{{version.app}} v {{version.number}}
					<!-- TODO: display content_ref? -->
					<span class="badge" ng-repeat="approval in version.approvals">{{approval}}</span>
				</div>
			</div>
			<div class="panel panel-default">
				<div class="panel-heading">
					<h3 class="panel-title">Upload new version</h3>
				</div>
				<div class="panel-body">
					<form action="/repo/upload" method="POST" enctype="multipart/form-data" role="form">
						<div class="form-group">
							<label for="application">Application</label>
							<input id="application" class="form-control" type="text" name="application"></input>
						</div>
						<div class="form-group">
							<label for="version">Version</label>
							<input id="version" class="form-control" type="text" name="version"></input>
						</div>
						<div class="form-group">
							<label for="file">File</label>
							<input id="file" type="file" name="data"></input></div>
						<input type="submit" class="btn btn-default" />
					</form>
			  </div>
			</div>
		</div>
		<script src="angular.min.js"></script>
		<script src="main.js"></script>
	</body>
</html>
