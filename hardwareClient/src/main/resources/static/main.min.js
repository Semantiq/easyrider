/*! EasyRider build 24-08-2014 */
var app=angular.module("easyrider",["ngRoute"]);app.config(["$locationProvider",function(a){a.html5Mode(!0)}]),app.service("Api",["Connection",function(a){var b=this;b.isAuthenticated=!1,b.objects={Authenticate:function(){this.jsonClass="easyrider.Api$Authenticate"}},b.authenticate=function(b){a.send(b)},a.on["easyrider.Api$Authentication"]=function(){b.isAuthenticated=!0}}]),app.service("Connection",["$rootScope",function(a){function b(b){a.$apply(function(){d.on[b.jsonClass]?d.on[b.jsonClass](b):console.error("Unhandled message ",b)})}function c(){d.ws=new WebSocket("ws://"+location.host),d.ws.onclose=function(){d.open=!1,setTimeout(function(){c()},500)},d.ws.onopen=function(){d.open=!0;for(var a in e)d.ws.send(e[a]);e=[]},d.ws.onmessage=function(a){b(JSON.parse(a.data))}}var d=this;d.open=!1,d.on={};var e=[];d.send=function(a){var b=JSON.stringify(a);d.open?d.ws.send(b):e.push(b)},c()}]),app.config(["$routeProvider",function(a){a.when("/",{templateUrl:"/pages/index/template.html"})}]),app.controller("LoginController",["$scope","Api",function(a,b){a.signIn=function(){b.authenticate(new b.objects.Authenticate)},a.Api=b}]);